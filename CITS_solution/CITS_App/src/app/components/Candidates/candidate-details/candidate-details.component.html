<div class="container">
    <div class="header-section">
      <button class="btn btn--outline back-btn" (click)="goBack()">
        ‚Üê Back to Candidates
      </button>
      <h2>Candidate Details</h2>
    </div>
  
    <div *ngIf="loading" class="loading">
      <div class="loading-spinner"></div>
      <p>Loading candidate details...</p>
    </div>
  
    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
    </div>
  
    <div *ngIf="candidate && !loading" class="candidate-details">
      <!-- Personal Information Section -->
      <div class="details-card">
        <div class="card-header">
          <h3>Personal Information</h3>
          <div class="status-container">
            <span [ngClass]="'status-pill ' + (candidate.status | lowercase).replace(' ', '-')">
              {{ candidate.status }}
            </span>
          </div>
        </div>
        
        <div class="card-content">
          <div class="info-grid">
            <div class="info-item">
              <label>Full Name</label>
              <span>{{ candidate.fullName }}</span>
            </div>
            <div class="info-item">
              <label>Email</label>
              <span>{{ candidate.email }}</span>
            </div>
            <div class="info-item">
              <label>Phone</label>
              <span>{{ candidate.phone }}</span>
            </div>
            <div class="info-item">
              <label>Applied For</label>
              <span>{{ candidate.appliedFor }}</span>
            </div>
            <div class="info-item">
              <label>Experience</label>
              <span>{{ candidate.experienceYears }} years</span>
            </div>
            <div class="info-item">
              <label>Match Percentage</label>
              <span class="match-percentage">{{ candidate.matchPercentage }}%</span>
            </div>
          </div>
          
          <div class="summary-section">
            <label>Summary</label>
            <p>{{ candidate.summary }}</p>
          </div>
  
          <div class="resume-section">
            <button class="btn btn--primary" (click)="downloadResume()" *ngIf="candidate.resumeLink">
              üìÑ Download Resume
            </button>
          </div>
        </div>
      </div>
  
      <!-- Skills Section -->
      <div class="details-card">
        <div class="card-header">
          <h3>Skills</h3>
        </div>
        <div class="card-content">
          <div class="skills-container">
            <span *ngFor="let skill of candidate.skills" class="skill-tag">
              {{ skill }}
            </span>
          </div>
        </div>
      </div>
  
      <!-- Education Section -->
      <div class="details-card">
        <div class="card-header">
          <h3>Education</h3>
        </div>
        <div class="card-content">
          <div class="education-list">
            <div *ngFor="let edu of candidate.education" class="education-item">
              <div class="edu-degree">{{ edu.degree }}</div>
              <div class="edu-institute">{{ edu.institute }}</div>
              <div class="edu-year">{{ edu.year }}</div>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Interview Stages Section -->
      <div class="details-card">
        <div class="card-header">
          <h3>Interview Process</h3>
        </div>
        <div class="card-content">
          <div class="stages-container">
            <div *ngFor="let stage of candidate.interviewStages" class="stage-item">
              <div class="stage-header">
                <h4>{{ stage.stage }}</h4>
                <span [ngClass]="'stage-status ' + (stage.status | lowercase)">
                  {{ stage.status }}
                </span>
              </div>
              
              <div class="stage-details">
                <div class="stage-info">
                  <span><strong>Interviewer:</strong> {{ stage.interviewer }}</span>
                  <span><strong>Date:</strong> {{ stage.scheduledDateTime | date:'medium' }}</span>
                  <span><strong>Mode:</strong> {{ stage.interviewMode }}</span>
                </div>
                
                <div class="evaluations" *ngIf="stage.evaluations.length > 0">
                  <h5>Evaluations</h5>
                  <div *ngFor="let eval of stage.evaluations" class="evaluation-item">
                    <div class="eval-header">
                      <span class="eval-type">{{ eval.evaluationType }}</span>
                      <span class="eval-score">{{ eval.score }}/10</span>
                    </div>
                    <p class="eval-feedback">{{ eval.feedback }}</p>
                    <small class="eval-date">{{ eval.evaluatedAt | date:'short' }}</small>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  
      <!-- Action Buttons -->
      <div class="action-section">
        <button 
          class="btn btn-success" 
          (click)="updateStatus('Selected')"
          [disabled]="candidate.status === 'Selected'">
          ‚úì Select Candidate
        </button>
        
        <button 
          class="btn btn-danger" 
          (click)="updateStatus('Rejected')"
          [disabled]="candidate.status === 'Rejected'">
          ‚úó Reject Candidate
        </button>
      </div>
    </div>
  </div>
  